"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[156],{91713:function(e,a,n){n.r(a);var r=n(33032),s=n(23430),l=n(84322),t=n.n(l),i=n(72791),o=n(55705),c=n(2557),d=n(77849),m=n(56391),u=n(94924),h=n(16030),v=n(91653),p=n(29801),x=n(87273),f=(n(97225),n(25922)),b=n(79271),g=n(12667),j=n(89731),N=n(80184),_=function(e){var a=e.loading,n=e.currentPage,l=(0,b.k6)(),_=((0,h.v9)((function(e){return e.auth.permissions})),(0,h.v9)((function(e){return e.auth.is_superuser})),(0,h.v9)((function(e){return e.user.user}))),y=(0,h.v9)((function(e){return e.user.edit})),w=(0,h.I0)(),Z=[{id:1,name:"ADMIN"},{id:2,name:"STAFF"},{id:3,name:"MAINTAINER"}],k=(0,i.useState)(!1),F=(0,s.Z)(k,2),C=F[0],U=F[1],q={first_name:y?null===_||void 0===_?void 0:_.first_name:"",middle_name:y?null===_||void 0===_?void 0:_.middle_name:"",last_name:y?null===_||void 0===_?void 0:_.last_name:"",email:y?null===_||void 0===_?void 0:_.email:"",username:y?null===_||void 0===_?void 0:_.username:"",user_branch:y?null===_||void 0===_?void 0:_.user_branch:null,group:y?Z.find((function(e){return e.id===(null===_||void 0===_?void 0:_.group)})):null,employee_id:y?null===_||void 0===_?void 0:_.employee_id:"",gender:y?f.od.find((function(e){return e.id===(null===_||void 0===_?void 0:_.gender)})):"",remarks:"",is_active:!!y&&(null===_||void 0===_?void 0:_.is_active)},A=m.Ry().shape({first_name:m.Z_().min(2,"First name must be at least 2 characters.").max(50,"First name should be 50 characters.").matches(/(?=.*^[A-Za-z]\w).*$/,"First name should only contain alphabet."),middle_name:m.Z_().min(2,"Middle name must be at least 2 characters.").max(50,"Middle name should be 50 characters.").matches(/(?=.*^[A-Za-z]\w).*$/,"Middle name should only contain alphabet."),last_name:m.Z_().min(2,"Last name must be at least 2 characters.").max(50,"Last name should be 50 characters.").matches(/(?=.*^[A-Za-z]\w).*$/,"Last name should only contain alphabet."),email:m.Z_().email().required("Email is required."),user_branch:m.Ry().typeError("Branch is required").required("Branch is required"),group:m.Ry().typeError("Group is required").required("Group is required"),employee_id:m.Z_(),username:m.Z_().required("Username is required.").min(4,"Username must be at least 4 characters.").max(50,"Username should be 50 characters.").matches(/(?=.*^[A-Za-z_]\w).*$/,"Username should begin with _ or alphabet."),is_active:m.Xg(),gender:m.Ry().nullable(!0),remarks:m.Z_().required("Remarks is required")}),B=function(){var e=(0,r.Z)(t().mark((function e(a){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y||a.target.value===(null===_||void 0===_?void 0:_.username)){e.next=6;break}if(!a.target.value.trim()||""===a.target.value){e.next=6;break}return e.next=4,(0,x.k)(a);case 4:e.sent?((0,p.Mn)("User name with this Name is already added. "),U(!0)):U(!1);case 6:if(y||!a.target.value.trim()||""===a.target.value){e.next=11;break}return e.next=9,(0,x.k)(a);case 9:e.sent?((0,p.Mn)("User name with this Name is already added. "),U(!0)):U(!1);case 11:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),M=function(){var e=(0,r.Z)(t().mark((function e(a){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y||a.target.value===(null===_||void 0===_?void 0:_.employee_id)){e.next=6;break}if(!a.target.value.trim()||""===a.target.value){e.next=6;break}return e.next=4,(0,x.Z)(a);case 4:e.sent?((0,p.Mn)("User name with this Employee ID is already added. "),U(!0)):U(!1);case 6:if(y||!a.target.value.trim()||""===a.target.value){e.next=11;break}return e.next=9,(0,x.Z)(a);case 9:e.sent?((0,p.Mn)("User name with this Employee ID is already added. "),U(!0)):U(!1);case 11:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),E=function(){var e=(0,r.Z)(t().mark((function e(a,n,r){var s,l,i,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=r.limit,l=r.offset,e.next=3,(0,j.Z)("/api/v1/core-app/branch?search=".concat(a,"&offset=").concat(l,"&limit=").concat(s));case 3:return i=e.sent,o=i.data,e.abrupt("return",{options:o.results,hasMore:o.count>s,additional:{offset:s,limit:s+10}});case 6:case"end":return e.stop()}}),e)})));return function(a,n,r){return e.apply(this,arguments)}}();return(0,N.jsx)(N.Fragment,{children:(0,N.jsx)("div",{className:"row  mt-3",children:(0,N.jsx)("div",{className:"col-12",children:(0,N.jsx)("div",{className:"registration-process ",children:(0,N.jsx)(o.J9,{enableReinitialize:!0,initialValues:q,validationSchema:A,onSubmit:function(e){var a=e.first_name,r=e.middle_name,s=e.last_name,t=e.email,i=e.username,o=e.employee_id,c=e.user_branch,d=e.is_active,m=e.group,u=e.gender,h=e.remarks,p=(null===a||void 0===a?void 0:a.charAt(0).toUpperCase())+(null===a||void 0===a?void 0:a.slice(1)),x=(null===s||void 0===s?void 0:s.charAt(0).toUpperCase())+(null===s||void 0===s?void 0:s.slice(1)),f=(null===r||void 0===r?void 0:r.charAt(0).toUpperCase())+(null===r||void 0===r?void 0:r.slice(1));if(U(!0),y){var b=_.id;w((0,v.Nq)(b,{first_name:p,middle_name:f,last_name:x,email:t,username:(null===i||void 0===i?void 0:i.charAt(0).toLowerCase())+(null===i||void 0===i?void 0:i.slice(1)),gender:""!==u?u.id:"",employee_id:o,user_branch:null===c||void 0===c?void 0:c.id,group:null===m||void 0===m?void 0:m.id,is_active:d,remarks:h},l,n))}},children:function(e){return(0,N.jsxs)(o.l0,{autoComplete:"off",children:[(0,N.jsxs)("div",{className:"form-group row mb-2 justify-content-center",children:[(0,N.jsxs)("div",{className:"col-4",children:[(0,N.jsx)("label",{htmlFor:"first_name",className:"fw-bold",children:"First Name"}),(0,N.jsx)(o.gN,{type:"text",name:"first_name",className:"form-control ",placeholder:"First Name"}),(0,N.jsx)(o.Bc,{name:"first_name",component:u.Z})]}),(0,N.jsxs)("div",{className:"col-4",children:[(0,N.jsx)("label",{htmlFor:"middle_name",className:"fw-bold",children:"Middle Name"}),(0,N.jsx)(o.gN,{type:"text",name:"middle_name",className:"form-control ",placeholder:"Middle Name"}),(0,N.jsx)(o.Bc,{name:"middle_name",component:u.Z})]}),(0,N.jsxs)("div",{className:"col-4",children:[(0,N.jsx)("label",{htmlFor:"last_name",className:"fw-bold",children:"Last Name"}),(0,N.jsx)(o.gN,{type:"text",name:"last_name",className:"form-control ",placeholder:"Last Name"}),(0,N.jsx)(o.Bc,{name:"last_name",component:u.Z})]})]}),(0,N.jsxs)("div",{className:"form-group row mb-2 justify-content-center",children:[(0,N.jsxs)("div",{className:"col-4",children:[(0,N.jsxs)("label",{htmlFor:"username",className:"fw-bold",children:["User Name (Case sensitive)",(0,N.jsx)("span",{className:"text-danger",children:"*"})]}),(0,N.jsx)(o.gN,{type:"text",name:"username",className:"form-control ",placeholder:"Username",onChange:function(a){var n=(a.target.value||"").replace(/\s+/gi,"");e.setFieldValue("username",n.trim()),B(a)}}),(0,N.jsx)(o.Bc,{name:"username",component:u.Z})]}),(0,N.jsxs)("div",{className:"col-4",children:[(0,N.jsxs)("label",{htmlFor:"email",className:"fw-bold",children:["Email",(0,N.jsx)("strong",{className:"text-danger ml-1",children:"*"})]}),(0,N.jsx)(o.gN,{type:"email",name:"email",className:"form-control ",placeholder:"Email"}),(0,N.jsx)(o.Bc,{name:"email",component:u.Z})]}),(0,N.jsxs)("div",{className:"col-4 ",children:[(0,N.jsxs)("label",{htmlFor:"user_branch",className:"fw-bold ",children:["Branch",(0,N.jsx)("strong",{className:"text-danger ml-1",children:"*"})]}),(0,N.jsx)("div",{style:{display:"flex"},children:(0,N.jsx)("div",{className:"col-12",children:(0,N.jsx)(g.n9,{value:e.values.user_branch,isClearable:"true",isSearchable:"true",name:"user_branch",getOptionLabel:function(e){return"".concat(null===e||void 0===e?void 0:e.name," ")},getOptionValue:function(e){return"".concat(null===e||void 0===e?void 0:e.id)},onChange:function(a){e.setFieldValue("user_branch",a)},loadOptions:E,additional:{offset:0,limit:10}})})}),(0,N.jsx)("div",{children:(0,N.jsx)(o.Bc,{name:"user_branch",component:u.Z})})]})]}),(0,N.jsxs)("div",{className:"form-group row mb-2",children:[(0,N.jsxs)("div",{className:"col-3 ",children:[(0,N.jsxs)("label",{htmlFor:"group",className:"fw-bold ",children:["Group",(0,N.jsx)("strong",{className:"text-danger ml-1",children:"*"})]}),(0,N.jsx)("div",{style:{display:"flex"},children:(0,N.jsx)("div",{className:"col-12",children:(0,N.jsx)(d.ZP,{value:e.values.group,isClearable:"true",isSearchable:"true",name:"group",getOptionLabel:function(e){return"".concat(null===e||void 0===e?void 0:e.name," ")},getOptionValue:function(e){return"".concat(null===e||void 0===e?void 0:e.id)},onChange:function(a){e.setFieldValue("group",a)},options:Z})})}),(0,N.jsx)("div",{children:(0,N.jsx)(o.Bc,{name:"group",component:u.Z})})]}),(0,N.jsxs)("div",{className:"col-3",children:[(0,N.jsx)("label",{htmlFor:"gender",className:"fw-bold",children:"Gender"}),(0,N.jsx)(d.ZP,{value:e.values.gender,isClearable:"true",isSearchable:"true",name:"gender",getOptionLabel:function(e){return"".concat(null===e||void 0===e?void 0:e.name," ")},getOptionValue:function(e){return"".concat(null===e||void 0===e?void 0:e.id)},options:f.od,onChange:function(a){e.setFieldValue("gender",a)}}),(0,N.jsx)(o.Bc,{name:"gender",component:u.Z})]}),(0,N.jsxs)("div",{className:" col-3",children:[(0,N.jsxs)("label",{htmlFor:"employee_id",className:"fw-bold float-start",children:["Employee ID",(0,N.jsx)("strong",{className:"text-danger ml-1",children:"*"})]}),(0,N.jsx)(o.gN,{type:"text",name:"employee_id",value:e.values.employee_id,className:"form-control ",placeholder:"Employee ID",onChange:function(a){M(a),e.setFieldValue("employee_id",a.target.value)}}),(0,N.jsx)(o.Bc,{name:"employee_id",component:u.Z})]})]}),(0,N.jsxs)("div",{className:"form-group row mb-2",children:[(0,N.jsxs)("div",{className:"col-3",children:[(0,N.jsxs)("label",{htmlFor:"remarks",className:"fw-bold",children:["Remarks",(0,N.jsx)("span",{className:"text-danger",children:"*"})]}),(0,N.jsx)("textarea",{type:"text",name:"remarks",onChange:function(a){e.setFieldValue("remarks",a.target.value.trim())},className:"form-control",placeholder:"Enter remarks"}),(0,N.jsx)(o.Bc,{name:"remarks",component:u.Z})]}),(0,N.jsxs)("div",{className:"col-12 text-center ",children:[(0,N.jsx)(o.gN,{type:"checkbox",name:"is_active",id:"is_active",className:"filled-in chk-col-blue"}),(0,N.jsxs)("label",{htmlFor:"is_active",className:"fw-bold  mx-2",children:[" ","Active"]})]})]}),(0,N.jsx)("div",{className:"form-group text-center",children:(0,N.jsx)(c.Z,{type:"btn",className:"btn btn-primary ",loading:a,disabled:C,title:"Update",content:"Update"})})]})}})})})})})};a.default=i.memo(_)}}]);
//# sourceMappingURL=156.4f5cae21.chunk.js.map