"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[525],{81829:function(e,n,t){t(72791);var r=t(56355),a=t(98158),i=t(80184);n.Z=function(e){var n=e.search,t=e.onClick,s=e.addPermission;return(0,i.jsxs)("div",{className:"text-center justify-content-center no-data",children:[(0,i.jsx)("h4",{className:"fw-normal mb-3",children:"No data to Display"}),!n&&s&&(0,i.jsxs)("h6",{children:["Please"," ",(0,i.jsx)(a.Z,{content:"Add",children:(0,i.jsxs)("button",{onClick:t,className:"btn btn-primary waves-effect waves-light btn-sm mx-2 p-1 nodata-btn",children:[(0,i.jsx)(r.wEH,{className:"nodata-icon"}),"\xa0Add"]})})," ","some..."]})]})}},90883:function(e,n,t){t.d(n,{Z:function(){return l}});var r=t(72791),a=t(80184),i=function(e){var n=e.offset,t=e.limit,i=e.count;return(0,a.jsx)(r.Fragment,{children:(0,a.jsxs)("p",{children:["Showing ",n," to"," ",t>i||0===t?i:t," of ",i," entries"]})})},s=r.memo(i),c=function(e){var n=e.postsPerPage,t=e.totalPosts,r=e.paginate,i=e.handleClick,s=e.currentPage,c=e.maxPageNumberLimit,o=e.minPageNumberLimit,l=[];if(n>0)for(var d=1;d<=Math.ceil(t/n);d++)l.push(d);l.length;return o>=1&&(0,a.jsx)("button",{className:"page-link",onClick:function(){return i("previous")},children:"\u2026"}),(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("ul",{className:"pagination pagination-sm justify-content-end",children:[(0,a.jsx)("li",{className:"page-item ",children:(0,a.jsx)("button",{className:"page-link",onClick:function(){return i("previous")},disabled:s===l[0],children:"\xab"})}),l.map((function(e,n){return e<c+1&&e>o?(0,a.jsx)("li",{className:"page-item",children:(0,a.jsx)("button",{onClick:function(){return r(e)},className:"page-link ".concat(n+1===s?"active":null),children:e})},e):null})),(0,a.jsx)("li",{className:"page-item",children:(0,a.jsx)("button",{className:"page-link",onClick:function(){return i("next")},disabled:s===l[l.length-1],children:"\xbb"})})]})})},o=r.memo(c),l=function(e){var n=e.currentPage,t=e.postsPerPage,r=e.count,i=e.paginate,c=e.handleClick,l=e.setCurrentPage,d=e.minPageNumberLimit,u=e.maxPageNumberLimit;return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"row",children:[(0,a.jsx)("div",{className:"col-6",children:(0,a.jsx)(s,{offset:1+(n-1)*t,limit:t*n,count:r})}),t<r&&(0,a.jsx)("div",{className:"col-6 text-right",children:(0,a.jsx)(o,{postsPerPage:t,totalPosts:r,paginate:i,handleClick:c,currentPage:n,setCurrentPage:l,minPageNumberLimit:d,maxPageNumberLimit:u})})]})})}},537:function(e,n,t){var r=t(72791),a=t(80184),i=function(e){var n=e.postsPerPage,t=e.setPostsPerPage;return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("p",{className:"fw-normal p-0 m-0",children:["Show",(0,a.jsxs)("span",{className:"ml-1 mr-1",children:[" ",(0,a.jsxs)("select",{value:n,onChange:function(e){var n=Number(e.target.value);t(n)},children:[(0,a.jsx)("option",{value:"10",children:"10"}),(0,a.jsx)("option",{value:"20",children:"20"}),(0,a.jsx)("option",{value:"40",children:"40"}),(0,a.jsx)("option",{value:"99999999",children:"All"})]})]})," ","entries"]})})};n.Z=r.memo(i)},12721:function(e,n,t){t(72791);var r=t(84341),a=t(80184);n.Z=function(){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"row ",children:[(0,a.jsx)("div",{className:"col-6 d-flex ",children:(0,a.jsx)(r.ZP,{width:200,height:25})}),(0,a.jsx)("div",{className:"col-6 d-flex justify-content-end",children:(0,a.jsx)(r.ZP,{width:80,height:30})})]}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)(r.ZP,{height:40}),(0,a.jsx)(r.ZP,{count:10,height:25})]}),(0,a.jsxs)("div",{className:"row d-flex mt-2",children:[(0,a.jsx)("div",{className:"col-6",children:(0,a.jsx)(r.ZP,{width:220,height:20})}),(0,a.jsx)("div",{className:"col-6 d-flex justify-content-end",children:(0,a.jsx)(r.ZP,{width:200,height:30})})]})]})}},98158:function(e,n,t){t(72791);var r=t(36652),a=t(80184);n.Z=function(e){var n=e.content,t=e.children;return(0,a.jsx)(r.ZP,{content:n,children:t})}},15300:function(e,n,t){t.r(n),t.d(n,{default:function(){return N}});var r=t(23430),a=t(72791),i=t(50645),s=t(27241),c=t(56355),o=t(16030),l=t(69666),d=t(90883),u=t(81829),p=t(98158),m=t(79271),f=t(89472),h=t(35125),x=(t(57693),t(92979)),v=t(87102),g=t(80184),j=function(e){var n,t,r=e.show,a=e.setShow,i=e.info,s=e.setInfo,c=i.name,o=i.card_no,l=i.address,d=i.citizenship_no,u=i.district,p=i.mobile_no,m=i.owner_photo,j=i.qr,b=new h.default({orientation:"landscape",unit:"mm",format:[430,270]}),_="",P=(0,f.Z)(o);try{for(P.s();!(t=P.n()).done;){var N=t.value;"1"===N?_+="!":"2"===N?_+="@":"3"===N?_+="#":"4"===N?_+="$":"5"===N?_+="%":"6"===N?_+="^":"7"===N?_+="&":"8"===N?_+="*":"9"===N?_+="(":"0"===N&&(_+=")")}}catch(C){P.e(C)}finally{P.f()}b.addImage(x,0,0,430,270),b.setTextColor("#0E58A4"),b.setFont("Preeti","normal"),b.setFontSize(60),b.text(_,100,127),b.text("sf8{ g+",21,129),b.text("M",82,129),b.text("gfd",21,150),b.text("M",82,150),b.text("7]ufgf",21,172),b.text("M",82,172),b.text("gf=k|=g+",21,193),b.text("M",82,193),b.text("lhNnf",21,216),b.text("M",82,216),b.text("df]afO{n",21,237),b.text("M",82,237),b.text(c,100,150),b.text(l,100,172),b.text(d,100,193),b.text(null===u||void 0===u?void 0:u.name,100,216),b.text(p,100,237),b.addPage([430,270],"landscape"),b.addImage(v,0,0,430,270),b.addImage(m,172,82,120,120),b.addImage(j,321,91,80,100);var y=b.output("blob");n=URL.createObjectURL(y);var w=r?"modal display-block":"modal display-none";return(0,g.jsxs)("div",{className:w,tabIndex:"-1",children:[(0,g.jsx)("div",{className:"modal-dialog modal-md",children:(0,g.jsxs)("div",{className:"modal-content content",children:[(0,g.jsxs)("div",{className:"modal-header",children:[(0,g.jsx)("h5",{className:"modal-title",id:"exampleModalLabel",children:"Print Preview"}),(0,g.jsx)("button",{type:"button",className:"btn-close","data-dismiss":"modal","aria-label":"Close",onClick:function(){a(!1),s("")},children:"\xd7"})]}),(0,g.jsx)("div",{className:"modal-body text-center",children:(0,g.jsx)("iframe",{title:"print",type:"application/pdf",frameBorder:"0",width:"415px",src:n,height:"580px"})})]})})," "]})},b=function(e){var n=e.currentPage,t=e.postsPerPage,i=e.setCurrentPage,f=e.count,h=e.maxPageNumberLimit,x=e.setMaxPageNumberLimit,v=e.minPageNumberLimit,b=e.setMinPageNumberLimit,_=e.search,P=(0,a.useState)(!1),N=(0,r.Z)(P,2),y=N[0],w=N[1],C=(0,a.useState)(null),Z=(0,r.Z)(C,2),k=Z[0],S=Z[1],I=(0,m.k6)(),T=(0,o.v9)((function(e){return e.auth.group})),E=(0,o.v9)((function(e){return e.auth.is_superuser})),L=(0,o.v9)((function(e){return e.printCredit.prints})),R=(0,o.v9)((function(e){return e.printCredit.next})),A=(0,o.v9)((function(e){return e.printCredit.previous})),M=(0,o.I0)(),F=(0,a.useState)(5),D=(0,r.Z)(F,1)[0],U=!("ADMIN"!==T&&"STAFF"!==T&&!E);return(0,g.jsxs)(g.Fragment,{children:[(null===L||void 0===L?void 0:L.length)>0?(0,g.jsxs)("div",{className:"mt-2",children:[(0,g.jsx)("div",{className:"table-scrollable",children:(0,g.jsxs)("table",{className:"table table-hover table-bordered text-center",children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{scope:"col",style:{width:"8%"},children:"S.N"}),(0,g.jsx)("th",{scope:"col",children:"Card Number"}),(0,g.jsx)("th",{scope:"col",children:"First Name"}),(0,g.jsx)("th",{scope:"col",children:"Last Name"}),(0,g.jsx)("th",{scope:"col",children:"Action"})]})}),(0,g.jsx)("tbody",{children:(null===L||void 0===L?void 0:L.length)>0&&L.map((function(e,r){var a=e.id,i=e.card_no,s=e.first_name_nepali,o=e.last_name_nepali;return(0,g.jsxs)("tr",{children:[(0,g.jsxs)("td",{className:"fw-bold",style:{width:"8%"},children:[t*(n-1)+(r+1)," "]}),(0,g.jsx)("td",{children:i}),(0,g.jsx)("td",{children:""===s?"-":s}),(0,g.jsx)("td",{children:""===o?"-":o}),(0,g.jsxs)("td",{children:[(0,g.jsx)(p.Z,{content:"Edit",children:(0,g.jsx)("button",{onClick:function(){return function(e){M({type:l.P.PRINT_EDIT_SUCCESS,payload:e}),I.push("/create-print-credit")}(a)},className:"btn btn-sm btn-edit btn-primary mx-2",children:(0,g.jsx)(c.fmQ,{})})}),(0,g.jsx)(p.Z,{content:"Print",children:(0,g.jsx)("button",{onClick:function(){return function(e){S(e),w(!0)}(e)},className:"btn btn-sm  btn-success mx-2",children:(0,g.jsx)(c.rcQ,{})})})]})]},a)}))})]})}),f>0&&(0,g.jsx)(d.Z,{currentPage:n,postsPerPage:t,count:f,paginate:function(e){M((0,s.R8)({number:e,postsPerPage:t})),i(e)},handleClick:function(e){"previous"===e?(M((0,s.TI)(A)),i((function(e){return e-1})),(n-1)%D===0&&(x(h-D),b(v-D))):"next"===e&&(M((0,s.hj)(R)),i((function(e){return e+1})),n+1>h&&(x(h+D),b(v+D)))},setCurrentPage:i,minPageNumberLimit:v,maxPageNumberLimit:h})]}):(0,g.jsx)(u.Z,{search:_,onClick:function(){return I.push("/create-print-credit")},addPermission:U}),y&&(0,g.jsx)(j,{show:y,setShow:w,info:k,setInfo:S})]})},_=t(12721),P=t(537),N=function(){var e=(0,m.k6)(),n=(0,o.v9)((function(e){return e.printCredit.prints})),t=(0,o.v9)((function(e){return e.printCredit.loading})),l=(0,o.v9)((function(e){return e.printCredit.loading_updated})),d=(0,o.v9)((function(e){return e.printCredit.count})),u=(0,o.v9)((function(e){return e.search.search})),f=(0,o.I0)(),h=(0,a.useState)(1),x=(0,r.Z)(h,2),v=x[0],j=x[1],N=(0,a.useState)(5),y=(0,r.Z)(N,2),w=y[0],C=y[1],Z=(0,a.useState)(0),k=(0,r.Z)(Z,2),S=k[0],I=k[1],T=(0,a.useState)(10),E=(0,r.Z)(T,2),L=E[0],R=E[1];return(0,a.useEffect)((function(){0===L?f(""===u?(0,s.j8)(d):(0,s.o1)(u,d)):""===u?(L===i.P||j(1),f((0,s.j8)(L))):(j(1),C(5),I(0),f((0,s.o1)(u,L)))}),[f,L,u]),(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)("div",{className:"card",children:[(0,g.jsx)("div",{className:"header-content",children:(0,g.jsx)("h4",{className:"mb-sm-0 fw-normal",children:"Print"})}),(0,g.jsxs)("div",{className:"card-body",children:[(0,g.jsx)("div",{className:"row m-0 p-0",children:(null===n||void 0===n?void 0:n.length)>0&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"col-6",children:(0,g.jsx)(P.Z,{postsPerPage:L,setPostsPerPage:R})}),(0,g.jsx)("div",{className:"col-6 text-right",children:(0,g.jsx)(p.Z,{content:"Add",children:(0,g.jsxs)("button",{className:"btn btn-primary waves-effect waves-light btn-sm float-end",onClick:function(){return e.push("/create-print-credit")},children:[(0,g.jsx)(c.wEH,{className:"mb-1"}),"\xa0Add"]})})})]})}),t&&(0,g.jsx)(_.Z,{}),l&&(0,g.jsx)(_.Z,{}),!t&&!l&&(0,g.jsx)(b,{currentPage:v,setCurrentPage:j,postsPerPage:L,setPostsPerPage:R,count:d,maxPageNumberLimit:w,setMaxPageNumberLimit:C,minPageNumberLimit:S,setMinPageNumberLimit:I,search:u})]})]})})}},27241:function(e,n,t){t.d(n,{PW:function(){return w},hj:function(){return N},R8:function(){return y},TI:function(){return P},j8:function(){return _},o1:function(){return Z},Km:function(){return C}});var r=t(33032),a=t(84322),i=t.n(a),s=t(89731),c=function(e){return s.Z.get("api/v1/core-app/print-credit?offset=0&limit=".concat(e,"&ordering=-id"))},o=function(e){return s.Z.get(e)},l=function(e){return s.Z.get(e)},d=function(e,n){return s.Z.get("api/v1/core-app/print-credit?offset=".concat((e-1)*n,"&limit=").concat(n,"&ordering=-id"))},u=function(e){return s.Z.post("api/v1/core-app/print-credit",e,{"Content-Type":"multipart/form-data"})},p=function(e,n){return s.Z.patch("api/v1/core-app/print-credit/".concat(e),n,{"Content-Type":"multipart/form-data"})},m=function(e,n){return s.Z.get("api/v1/core-app/print-credit?offset=0&limit=".concat(n,"&search=").concat(e))},f=t(69666),h=function(){return{type:f.P.LOADING_PRINT_CREDIT}},x=function(e){return{type:f.P.GET_PRINT_CREDIT_SUCCESS,payload:e}},v=function(e){return{type:f.P.GET_PRINT_CREDIT_FAIL,payload:e}},g=function(e){return{type:f.P.CREATE_PRINT_CREDIT_SUCCESS,payload:e}},j=function(e){return{type:f.P.PRINT_CREDIT_UPDATE_SUCCESS,payload:e}},b=t(29801),_=function(e){return function(){var n=(0,r.Z)(i().mark((function n(t){var r,a;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t(h()),n.next=4,c(e);case 4:r=n.sent,a=r.data,t(x(a)),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(0),t(v(n.t0)),(0,b.Mn)(n.t0);case 13:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()},P=function(e){return function(){var n=(0,r.Z)(i().mark((function n(t){var r,a;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t(h()),n.next=4,o(e);case 4:r=n.sent,a=r.data,t(x(a)),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(0),t(v(n.t0)),(0,b.Mn)(n.t0);case 13:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()},N=function(e){return function(){var n=(0,r.Z)(i().mark((function n(t){var r,a;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t(h()),n.next=4,l(e);case 4:r=n.sent,a=r.data,t(x(a)),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(0),t(v(n.t0)),(0,b.Mn)(n.t0);case 13:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()},y=function(e){var n=e.number,t=e.postsPerPage;return function(){var e=(0,r.Z)(i().mark((function e(r){var a,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(h()),e.next=4,d(n,t);case 4:a=e.sent,s=a.data,r(x(s)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),r(v(e.t0)),(0,b.Mn)(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n){return e.apply(this,arguments)}}()},w=function(e,n){var t=e.first_name,a=e.first_name_nepali,s=e.middle_name,c=e.middle_name_nepali,o=e.last_name,l=e.last_name_nepali,d=e.address,p=e.address_nepali,m=e.citizenship_no,x=e.citizenship_no_nepali,v=e.mobile_no,j=e.mobile_no_nepali,_=e.district,P=e.branch,N=e.qr,y=e.owner_photo;return function(){var e=(0,r.Z)(i().mark((function e(r){var w,C,Z;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(w=new FormData).append("first_name",t),w.append("first_name_nepali",a),w.append("middle_name",s),w.append("middle_name_nepali",c),w.append("last_name",o),w.append("last_name_nepali",l),w.append("address",d),w.append("address_nepali",p),w.append("mobile_no",v),w.append("mobile_no_nepali",j),w.append("citizenship_no",m),w.append("citizenship_no_nepali",x),w.append("district",JSON.stringify(_)),w.append("branch",JSON.stringify(P)),N&&w.append("qr",N),y&&w.append("owner_photo",y),r(h()),e.next=21,u(w);case 21:C=e.sent,Z=C.data,r(g(Z)),(0,b.My)("Record Added Successfully."),n.push("/print-credit"),e.next=32;break;case 28:e.prev=28,e.t0=e.catch(0),r((i=e.t0,{type:f.P.CREATE_PRINT_CREDIT_FAIL,payload:i})),(0,b.Mn)("Failed to create record.");case 32:case"end":return e.stop()}var i}),e,null,[[0,28]])})));return function(n){return e.apply(this,arguments)}}()},C=function(e,n,t){return function(){var a=(0,r.Z)(i().mark((function r(a){var s,c,o,l,d,u,m,h,x,v,g,_,P,N,y,w,C,Z,k;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,a({type:f.P.LOADING_UPDATED}),s=t.first_name,c=t.first_name_nepali,o=t.middle_name,l=t.middle_name_nepali,d=t.last_name,u=t.last_name_nepali,m=t.address,h=t.address_nepali,x=t.citizenship_no,v=t.citizenship_no_nepali,g=t.mobile_no,_=t.mobile_no_nepali,P=t.district,N=t.branch,y=t.qr,w=t.owner_photo,t.remarks,(C=new FormData).append("first_name",s),C.append("first_name_nepali",c),C.append("middle_name",o),C.append("middle_name_nepali",l),C.append("last_name",d),C.append("last_name_nepali",u),C.append("address",m),C.append("address_nepali",h),C.append("mobile_no",g),C.append("mobile_no_nepali",_),C.append("citizenship_no",x),C.append("citizenship_no_nepali",v),C.append("district",JSON.stringify(P)),C.append("branch",JSON.stringify(N)),y&&C.append("qr",y),w&&C.append("owner_photo",w),r.next=22,p(e,C);case 22:Z=r.sent,k=Z.data,a(j(k)),(0,b.My)("Record Updated Successfully "),n.push("/print-credit"),r.next=33;break;case 29:r.prev=29,r.t0=r.catch(0),a((i=r.t0,{type:f.P.PRINT_CREDIT_UPDATE_FAIL,payload:i})),(0,b.Mn)("Failed to Update Record");case 33:case"end":return r.stop()}var i}),r,null,[[0,29]])})));return function(e){return a.apply(this,arguments)}}()},Z=function(e,n){return function(){var t=(0,r.Z)(i().mark((function t(r){var a,s;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r(h()),t.next=4,m(e,n);case 4:a=t.sent,s=a.data,r(x(s)),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),r(v(t.t0)),(0,b.Mn)(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}},50645:function(e,n,t){t.d(n,{P:function(){return r}});var r=10},87102:function(e,n,t){e.exports=t.p+"static/media/Back.685851c8bc2a959620a1.png"},92979:function(e,n,t){e.exports=t.p+"static/media/Front.12eaddf69d366022a0e6.png"},71002:function(e,n,t){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}t.d(n,{Z:function(){return r}})},89472:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(72327);function a(e,n){var t="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=(0,r.Z)(e))||n&&e&&"number"===typeof e.length){t&&(e=t);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,c=!0,o=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return c=e.done,e},e:function(e){o=!0,s=e},f:function(){try{c||null==t.return||t.return()}finally{if(o)throw s}}}}}}]);
//# sourceMappingURL=525.38d1f461.chunk.js.map