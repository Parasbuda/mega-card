"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[231],{5537:function(e,a,s){s.r(a);var n=s(33032),r=s(23430),l=s(84322),t=s.n(l),i=s(72791),o=s(55705),d=s(56391),c=s(77849),m=s(94924),u=s(16030),h=s(91653),p=s(29801),v=s(87273),f=s(39126),x=(s(97225),s(25922)),b=s(2557),j=s(79271),g=s(12667),_=s(89731),w=s(80184),N=function(e){var a=e.currentPage,s=e.loading,l=(0,j.k6)(),N=(0,u.v9)((function(e){return e.user.user})),y=(0,u.v9)((function(e){return e.user.edit})),Z=(0,i.useState)(null),F=(0,r.Z)(Z,2),C=F[0],k=F[1],q=(0,u.I0)(),A=(0,i.useState)("password"),B=(0,r.Z)(A,2),M=B[0],U=B[1],E=(0,i.useState)("password"),P=(0,r.Z)(E,2),S=P[0],O=P[1],I=(0,i.useState)(!1),L=(0,r.Z)(I,2),V=L[0],z=L[1],R=(0,i.useState)(null),$=(0,r.Z)(R,2),D=$[0],G=$[1],T=[{id:1,name:"ADMIN"},{id:2,name:"STAFF"},{id:3,name:"MAINTAINER"}],H={first_name:null!==D?D.first_name:y?null===N||void 0===N?void 0:N.first_name:"",middle_name:null!==D?D.middle_name:y?null===N||void 0===N?void 0:N.middle_name:"",last_name:null!==D?D.last_name:y?null===N||void 0===N?void 0:N.last_name:"",user_branch:null!==D?D.user_branch:y?null===N||void 0===N?void 0:N.user_branch:"",group:null!==D?D.group:y?T.find((function(e){return e.id===(null===y||void 0===y?void 0:y.group)})):"",email:null!==D?D.email:y?null===N||void 0===N?void 0:N.email:"",employee_id:null!==D?D.employee_id:y?null===N||void 0===N?void 0:N.employee_id:"",username:null!==D?D.username:y?null===N||void 0===N?void 0:N.username:"",gender:null!==D?D.gender:y?null===N||void 0===N?void 0:N.gender:"",password:null!==D?D.password:y?null===N||void 0===N?void 0:N.password:"",confirm_password:null!==D?D.confirm_password:y?null===N||void 0===N?void 0:N.confirm_password:"",is_active:null!==D?D.is_active:!y||(null===N||void 0===N?void 0:N.is_active)},J=d.Ry().shape({first_name:d.Z_().min(2,"First name must be at least 2 characters.").max(50,"First name should be 50 characters.").matches(/(?=.*^[A-Za-z]\w).*$/,"First name should only contain alphabet."),middle_name:d.Z_().min(2,"Middle name must be at least 2 characters.").max(50,"Middle name should be 50 characters.").matches(/(?=.*^[A-Za-z]\w).*$/,"Middle name should only contain alphabet."),last_name:d.Z_().min(2,"Last name must be at least 2 characters.").max(50,"Last name should be 50 characters.").matches(/(?=.*^[A-Za-z]\w).*$/,"Last name should only contain alphabet."),email:d.Z_().email().required("Email is required."),username:d.Z_().required("Username is required.").min(4,"Username must be at least 4 characters.").max(50,"Username should be 50 characters.").matches(/(?=.*^[A-Za-z_]\w).*$/,"Username should begin with _ or alphabet."),password:d.Z_().required("Please Enter your password").min(6,"Password must be at least 6 characters.").matches(/^(?=.*[a-z])(?=.*\d)[A-Za-z\d@$!%*#?&]{6,}$/,"Must Contain 6 Characters, One alphabet and One Number "),confirm_password:d.Z_().required("Password is required.").oneOf([d.iH("password"),null],"Passwords must match."),user_branch:d.Ry().typeError("Branch is required").required("Branch is required"),group:d.Ry().typeError("Group is required").required("Group is required"),employee_id:d.Z_(),is_active:d.Xg(),gender:d.Ry().nullable(!0)}),X=function(){var e=(0,n.Z)(t().mark((function e(a){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y||a.target.value===(null===N||void 0===N?void 0:N.username)){e.next=6;break}if(!a.target.value.trim()||""===a.target.value){e.next=6;break}return e.next=4,(0,v.k)(a);case 4:e.sent?(0,p.Mn)("User name with this  is already added. ")||z(!0):z(!1);case 6:if(!a.target.value.trim()||""===a.target.value){e.next=11;break}return e.next=9,(0,v.k)(a);case 9:e.sent?(0,p.Mn)("User with this name is already added ")||z(!0):z(!1);case 11:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),K=function(){U("password"===M?"text":"password")},Q=function(){O("password"===S?"text":"password")},W=function(){var e=(0,n.Z)(t().mark((function e(a,s,n){var r,l,i,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.limit,l=n.offset,e.next=3,(0,_.Z)("/api/v1/core-app/branch?search=".concat(a,"&offset=").concat(l,"&limit=").concat(r));case 3:return i=e.sent,o=i.data,e.abrupt("return",{options:o.results,hasMore:o.count>r,additional:{offset:r,limit:r+10}});case 6:case"end":return e.stop()}}),e)})));return function(a,s,n){return e.apply(this,arguments)}}(),Y=function(){var e=(0,n.Z)(t().mark((function e(a){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y||a.target.value===(null===N||void 0===N?void 0:N.employee_id)){e.next=6;break}if(!a.target.value.trim()||""===a.target.value){e.next=6;break}return e.next=4,(0,v.Z)(a);case 4:e.sent?((0,p.Mn)("User name with this Employee ID is already added. "),z(!0)):z(!1);case 6:if(y||!a.target.value.trim()||""===a.target.value){e.next=11;break}return e.next=9,(0,v.Z)(a);case 9:e.sent?((0,p.Mn)("User name with this Employee ID is already added. "),z(!0)):z(!1);case 11:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return(0,w.jsx)(w.Fragment,{children:(0,w.jsx)("div",{className:"row justify-content-center mt-3",children:(0,w.jsx)("div",{className:"col-12",children:(0,w.jsx)("div",{className:"registration-process ",children:(0,w.jsx)(o.J9,{enableReinitialize:!0,initialValues:H,validationSchema:J,onSubmit:function(e){var s=e.first_name,n=e.middle_name,r=e.last_name,t=e.email,i=e.username,o=e.is_active,d=e.employee_id,c=e.user_branch,m=e.gender,u=e.group,p=e.password,v=e.confirm_password,f=(null===s||void 0===s?void 0:s.charAt(0).toUpperCase())+(null===s||void 0===s?void 0:s.slice(1)),x=(null===n||void 0===n?void 0:n.charAt(0).toUpperCase())+(null===n||void 0===n?void 0:n.slice(1)),b=(null===r||void 0===r?void 0:r.charAt(0).toUpperCase())+(null===r||void 0===r?void 0:r.slice(1)),j=null===i||void 0===i?void 0:i.toLowerCase();z(!0),q((0,h.r4)({first_name:f,middle_name:x,last_name:b,email:t,username:j,gender:m,employee_id:d,user_branch:null===c||void 0===c?void 0:c.id,group:null===u||void 0===u?void 0:u.id,is_active:o,password:p,confirm_password:v,history:l},a)),z(!1),G(null)},children:function(e){return(0,w.jsxs)(o.l0,{autoComplete:"off",children:[(0,w.jsxs)("div",{className:"form-group row mb-2 justify-content-center",children:[(0,w.jsxs)("div",{className:" col-4",children:[(0,w.jsx)("label",{htmlFor:"first_name",className:"fw-bold float-start",children:"First Name"}),(0,w.jsx)(o.gN,{type:"text",name:"first_name",className:"form-control ",placeholder:"First Name"}),(0,w.jsx)(o.Bc,{name:"first_name",component:m.Z})]}),(0,w.jsxs)("div",{className:" col-4",children:[(0,w.jsx)("label",{htmlFor:"middle_name",className:"fw-bold float-start",children:"Middle Name"}),(0,w.jsx)(o.gN,{type:"text",name:"middle_name",className:"form-control ",placeholder:"Middle Name"}),(0,w.jsx)(o.Bc,{name:"middle_name",component:m.Z})]}),(0,w.jsxs)("div",{className:" col-4",children:[(0,w.jsx)("label",{htmlFor:"last_name",className:"fw-bold float-start",children:"Last Name"}),(0,w.jsx)(o.gN,{type:"text",name:"last_name",className:"form-control ",placeholder:"Last Name"}),(0,w.jsx)(o.Bc,{name:"last_name",component:m.Z})]})]}),(0,w.jsxs)("div",{className:"form-group row mb-2 justify-content-center",children:[(0,w.jsxs)("div",{className:"col-3",children:[(0,w.jsxs)("label",{htmlFor:"username",className:"fw-bold float-start",children:["User Name (Case Insensitive)",(0,w.jsx)("strong",{className:"text-danger ml-1",children:"*"})]}),(0,w.jsx)(o.gN,{type:"text",name:"username",className:"form-control ",placeholder:"Username",onChange:function(a){var s=(a.target.value||"").replace(/\s+/gi,"");e.setFieldValue("username",s.trim()),X(a)},autoFocus:!0}),(0,w.jsx)(o.Bc,{name:"username",component:m.Z})]}),(0,w.jsxs)("div",{className:" col-3",children:[(0,w.jsxs)("label",{htmlFor:"email",className:"fw-bold float-start",children:["Email",(0,w.jsx)("strong",{className:"text-danger ml-1",children:"*"})]}),(0,w.jsx)(o.gN,{type:"email",name:"email",className:"form-control ",placeholder:"Email"}),(0,w.jsx)(o.Bc,{name:"email",component:m.Z})]}),(0,w.jsxs)("div",{className:" col-3",children:[(0,w.jsxs)("label",{htmlFor:"employee_id",className:"fw-bold float-start",children:["Employee ID",(0,w.jsx)("strong",{className:"text-danger ml-1",children:"*"})]}),(0,w.jsx)(o.gN,{type:"text",name:"employee_id",value:e.values.employee_id,className:"form-control ",placeholder:"Employee ID",onChange:function(a){Y(a),e.setFieldValue("employee_id",a.target.value)}})]}),(0,w.jsxs)("div",{className:"col-3 ",children:[(0,w.jsxs)("label",{htmlFor:"user_branch",className:"fw-bold ",children:["Branch",(0,w.jsx)("strong",{className:"text-danger ml-1",children:"*"})]}),(0,w.jsx)("div",{style:{display:"flex"},children:(0,w.jsx)("div",{className:"col-12",children:(0,w.jsx)(g.n9,{value:e.values.user_branch,isClearable:"true",isSearchable:"true",name:"user_branch",getOptionLabel:function(e){return"".concat(null===e||void 0===e?void 0:e.name," ")},getOptionValue:function(e){return"".concat(null===e||void 0===e?void 0:e.id)},onChange:function(a){e.setFieldValue("user_branch",a)},loadOptions:W,additional:{offset:0,limit:10}})})}),(0,w.jsx)("div",{children:(0,w.jsx)(o.Bc,{name:"user_branch",component:m.Z})})]})]}),(0,w.jsxs)("div",{className:"form-group row mb-2 justify-content-center",children:[(0,w.jsxs)("div",{className:"col-3 password-field",children:[(0,w.jsxs)("label",{htmlFor:"password",className:"fw-bold float-start",children:["Password",(0,w.jsx)("strong",{className:"text-danger ml-1",children:"*"})]}),(0,w.jsxs)("div",{style:{position:"relative"},children:[(0,w.jsx)(o.gN,{type:M,name:"password",className:"form-control",placeholder:"Password"}),(0,w.jsx)("span",{onClick:K,children:"password"===M?(0,w.jsx)(f.cqT,{}):(0,w.jsx)(f.rnh,{})})]}),(0,w.jsx)(o.Bc,{name:"password",component:m.Z})]}),(0,w.jsxs)("div",{className:"col-3 password-field",children:[(0,w.jsxs)("label",{htmlFor:"confirm_password",className:"fw-bold float-start",children:["Confirm Password",(0,w.jsx)("strong",{className:"text-danger ml-1",children:"*"})]}),(0,w.jsxs)("div",{style:{position:"relative"},children:[(0,w.jsx)(o.gN,{type:S,name:"confirm_password",className:"form-control",placeholder:"Confirm Password"}),(0,w.jsx)("span",{onClick:Q,children:"password"===S?(0,w.jsx)(f.cqT,{}):(0,w.jsx)(f.rnh,{})})]}),(0,w.jsx)(o.Bc,{name:"confirm_password",component:m.Z})]}),(0,w.jsxs)("div",{className:"col-3 ",children:[(0,w.jsxs)("label",{htmlFor:"group",className:"fw-bold ",children:["Group",(0,w.jsx)("strong",{className:"text-danger ml-1",children:"*"})]}),(0,w.jsx)("div",{style:{display:"flex"},children:(0,w.jsx)("div",{className:"col-12",children:(0,w.jsx)(c.ZP,{value:e.values.group,isClearable:"true",isSearchable:"true",name:"group",getOptionLabel:function(e){return"".concat(null===e||void 0===e?void 0:e.name," ")},getOptionValue:function(e){return"".concat(null===e||void 0===e?void 0:e.id)},onChange:function(a){e.setFieldValue("group",a)},options:T})})}),(0,w.jsx)("div",{children:(0,w.jsx)(o.Bc,{name:"group",component:m.Z})})]}),(0,w.jsxs)("div",{className:"col-3",children:[(0,w.jsx)("label",{htmlFor:"gender",className:"fw-bold ",children:"Gender"}),(0,w.jsx)(c.ZP,{value:C,isClearable:"true",isSearchable:"true",name:"gender",getOptionLabel:function(e){return"".concat(null===e||void 0===e?void 0:e.name," ")},getOptionValue:function(e){return"".concat(null===e||void 0===e?void 0:e.id)},options:x.od,onChange:function(a){e.setFieldValue("gender",null===a||void 0===a?void 0:a.id),k(a)}}),(0,w.jsx)(o.Bc,{name:"gender",component:m.Z})]})]}),(0,w.jsx)("div",{className:"form-group row mb-2",children:(0,w.jsxs)("div",{className:"col-12 text-center",children:[(0,w.jsx)(o.gN,{type:"checkbox",name:"is_active",id:"is_active",className:"filled-in chk-col-blue"}),(0,w.jsxs)("label",{htmlFor:"is_active",className:"fw-bold  mx-2",children:[" ","Active"]})]})}),(0,w.jsx)("div",{className:"form-group text-center",children:(0,w.jsx)(b.Z,{type:"btn",className:"btn btn-primary",loading:s,disabled:V||!e.dirty,title:"Create",content:"Add"})})]})}})})})})})};a.default=i.memo(N)}}]);
//# sourceMappingURL=231.001cfdb7.chunk.js.map