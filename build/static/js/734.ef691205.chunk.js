"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[734],{2557:function(e,t,n){n(72791);var a=n(16587),r=n(98158),o=n(80184);t.Z=function(e){var t=e.type,n=e.className,s=e.disabled,i=e.title,c=e.loading,l=e.content,d=e.color,u=e.onClick;return(0,o.jsx)(r.Z,{content:l,children:(0,o.jsx)("button",{onClick:u,type:t,className:n,disabled:s,children:c?(0,o.jsx)(a.Z,{color:d}):i})})}},16587:function(e,t,n){n(72791);var a=n(32328),r=n(80184);t.Z=function(){return console.log("in"),(0,r.jsx)("img",{src:a,alt:"spinner",height:"30px",className:"ml-4"})}},94924:function(e,t,n){n.d(t,{Z:function(){return r}});n(72791);var a=n(80184),r=function(e){return(0,a.jsx)("div",{className:"error",children:e.children})}},98158:function(e,t,n){n(72791);var a=n(36652),r=n(80184);t.Z=function(e){var t=e.content,n=e.children;return(0,r.jsx)(a.ZP,{content:t,children:n})}},97734:function(e,t,n){n.r(t),n.d(t,{default:function(){return O}});var a=n(23430),r=n(72791),o=n(16030),s=n(33032),i=n(84322),c=n.n(i),l=n(10114),d=n(96063),u=n(55705),m=n(59513),p=n.n(m),f=n(12667),h=n(56391),v=n(2557),b=n(94924),D=n(89731),x=function(e){var t=e.formatedStartDate,n=e.formatedEndDate,a=e.district,r=e.branch,o=e.user,s=e.postsPerPage;return D.Z.get("api/v1/core-app/print-credit-report?offset=0&limit=".concat(s,"&district=").concat(a,"&branch=").concat(r,"&created_by=").concat(o,"&date_after=").concat(t,"&date_before=").concat(n))},g=function(e){var t=e.formatedStartDate,n=e.formatedEndDate,a=e.district,r=e.branch,o=e.user;return D.Z.get("api/v1/core-app/print-credit-report?district=".concat(a,"&branch=").concat(r,"&created_by=").concat(o,"&date_after=").concat(t,"&date_before=").concat(n,"&limit=0"))},S=n(15799),y=function(){return{type:S.x.LOADING_REPORT}},j=function(e){return{type:S.x.GET_CREDIT_PRINT_REPORT_SUCCESS,payload:e}},R=function(e){return{type:S.x.GET_CREDIT_PRINT_REPORT_FAIL,payload:e}},w=n(29801),N=function(e,t){return function(){var n=(0,s.Z)(c().mark((function n(a){var r,o,s,i,l,d,u;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.formatedStartDate,o=t.formatedEndDate,s=t.district,i=t.branch,l=t.user,n.prev=1,a(y()),n.next=5,x({formatedStartDate:r,formatedEndDate:o,district:s,branch:i,user:l,postsPerPage:e});case 5:d=n.sent,!(null!==(u=d.data)&&void 0!==u&&u.results.length)>0&&(0,w.W2)("Data Not found"),a(j(u)),n.next=15;break;case 11:n.prev=11,n.t0=n.catch(1),a(R(n.t0)),(0,w.Mn)(n.t0);case 15:case"end":return n.stop()}}),n,null,[[1,11]])})));return function(e){return n.apply(this,arguments)}}()},F=function(e){return function(){var t=(0,s.Z)(c().mark((function t(n){var a,r,o,s,i,l,d;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.formatedStartDate,r=e.formatedEndDate,o=e.district,s=e.branch,i=e.user,console.log(e,"body"),t.prev=2,n(y()),t.next=6,g({formatedStartDate:a,formatedEndDate:r,district:o,branch:s,user:i});case 6:l=t.sent,!(null!==(d=l.data)&&void 0!==d&&d.results.length)>0&&(0,w.W2)("Data Not found"),n(j(d)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),n(R(t.t0));case 15:case"end":return t.stop()}}),t,null,[[2,12]])})));return function(e){return t.apply(this,arguments)}}()},k=n(2664),P=n(80184),Z=function(e){var t=e.name,n=e.setShowPrintExcelReportModal,i=e.setShowPrintPDFReportModal,m=e.setShowPrintReportModal,x=e.reportStartDate,g=e.setReportStartDate,S=e.reportEndDate,y=e.setReportEndDate,j=e.setFormData,R=(0,o.I0)(),w=(0,r.useState)(!0),Z=(0,a.Z)(w,2),C=Z[0],E=(Z[1],{user:null,adSystem:!0,bsSystem:!1,startDate:(new Date).toLocaleDateString("fr-CA"),endDate:(new Date).toLocaleDateString("fr-CA"),quickReport:!0,pdfReport:!1,excelReport:!1,district:null,branch:null}),V=h.Ry().shape({adSystem:h.Xg(),bsSystem:h.Xg(),startDate:h.Z_().test("startDate","Start Date cannot be greater than today's date",(function(e){var t=this.parent.adSystem,n=void 0!==e?10===e.length?(0,l.bsToAd)(e):e:"";return!(t&&void 0!==e&&new Date(e)>new Date)&&!(!t&&void 0!==e&&new Date(n)>new Date)})).test("startDate","Start Date cannot be greater than end Date",(function(e){var t=this.parent,n=t.adSystem,a=t.endDate,r=void 0!==e?10===e.length?(0,l.bsToAd)(e):e:"";return!(n&&void 0!==e&&new Date(e)>new Date(a))&&!(!n&&void 0!==e&&new Date(r)>new Date(a))})),endDate:h.Z_().test("endDate","End Date cannot be greater than today's date",(function(e){var t=this.parent.adSystem,n=void 0!==e?10===e.length?(0,l.bsToAd)(e):e:"";return!(t&&void 0!==e&&new Date(e)>new Date)&&!(!t&&void 0!==e&&new Date(n)>new Date)})).test("endDate","End Date cannot be less than start Date",(function(e){var t=this.parent,n=t.adSystem,a=t.startDate,r=10===a.length?(0,l.bsToAd)(a):a,o=void 0!==e?10===e.length?(0,l.bsToAd)(e):e:"";return!(n&&void 0!==e&&new Date(e)<new Date(r))&&!(!n&&void 0!==e&&new Date(o)<new Date(r))})),user:h.Ry().nullable(!0),district:h.Ry().nullable(!0),branch:h.Ry().nullable(!0),quickReport:h.Xg(),pdfReport:h.Xg(),excelReport:h.Xg()}),M=function(){var e=(0,s.Z)(c().mark((function e(a){var r,o,s,l,d,u,p,f,h,v,b;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=a.startDate,o=a.endDate,s=a.adSystem,l=a.quickReport,d=a.pdfReport,u=a.user,p=a.district,f=a.branch,h=s?(0,k.P)(new Date(r)):x,v=s?(0,k.P)(new Date(o)):S,b={formatedStartDate:h,formatedEndDate:v,user:null!==u&&void 0!==u&&u.id?null===u||void 0===u?void 0:u.id:"",district:null!==p&&void 0!==p&&p.id?null===p||void 0===p?void 0:p.id:"",branch:null!==f&&void 0!==f&&f.id?null===f||void 0===f?void 0:f.id:""},j(b),l?C?"creditPrintReport"===t&&(R(N(10,b)),m(!0)):"creditPrintReport"===t&&(R(F(b)),m(!0)):d?"creditPrintReport"===t&&(R(F(b)),i(!0)):"creditPrintReport"===t&&(R(F(b)),n(!0));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=(0,s.Z)(c().mark((function e(t,n,a){var r,o,s,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.limit,o=a.offset,e.next=3,(0,D.Z)("/api/v1/user-app/user-list?search=".concat(t,"&offset=").concat(o,"&limit=").concat(r));case 3:return s=e.sent,i=s.data,e.abrupt("return",{options:i.results,hasMore:i.count>r,additional:{offset:i.count>r?r+1:r,limit:r+10}});case 6:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),O=function(){var e=(0,s.Z)(c().mark((function e(t,n,a){var r,o,s,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.limit,o=a.offset,e.next=3,(0,D.Z)("/api/v1/core-app/district-list?search=".concat(t,"&offset=").concat(o,"&limit=").concat(r));case 3:return s=e.sent,i=s.data,e.abrupt("return",{options:i.results,hasMore:i.count>r,additional:{offset:i.count>r?r+1:r,limit:r+10}});case 6:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),A=function(){var e=(0,s.Z)(c().mark((function e(t,n,a){var r,o,s,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.limit,o=a.offset,e.next=3,(0,D.Z)("/api/v1/core-app/branch-list?search=".concat(t,"&offset=").concat(o,"&limit=").concat(r));case 3:return s=e.sent,i=s.data,e.abrupt("return",{options:i.results,hasMore:i.count>r,additional:{offset:i.count>r?r+1:r,limit:r+10}});case 6:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}();return(0,P.jsx)(P.Fragment,{children:(0,P.jsx)("div",{className:"row justify-content-center",children:(0,P.jsx)("div",{className:"col-md-7 ",style:{paddingBottom:"10",marginBottom:"10%"},children:(0,P.jsx)("div",{className:"card p-3 mb-5 mt-3 bg-white rounded",children:(0,P.jsx)("div",{className:"card-body",children:(0,P.jsx)(u.J9,{enableReinitialize:!0,initialValues:E,validationSchema:V,onSubmit:M,children:function(e){return(0,P.jsxs)(u.l0,{autoComplete:"off",children:[(0,P.jsxs)("div",{className:"form-group row mb-5 justify-content-center",children:[(0,P.jsxs)("div",{className:"col-3 mb-3",children:[(0,P.jsx)("label",{htmlFor:"user",className:"fw-bold",children:"User"}),(0,P.jsx)(f.n9,{blurInputOnSelect:!0,value:e.values.user,isClearable:"true",isSearchable:"true",name:"user",inputId:"input",getOptionLabel:function(e){return"".concat(e.username)},getOptionValue:function(e){return"".concat(null===e||void 0===e?void 0:e.id)},onChange:function(t){e.setFieldValue("user",t)},loadOptions:_,additional:{offset:0,limit:10}}),(0,P.jsx)(u.Bc,{name:"user",component:b.Z})]}),(0,P.jsxs)("div",{className:"col-4 mb-3",children:[(0,P.jsx)("label",{htmlFor:"district",className:"fw-bold",children:"District"}),(0,P.jsx)(f.n9,{blurInputOnSelect:!0,value:e.values.supplier,isClearable:"true",isSearchable:"true",name:"district",inputId:"input",getOptionLabel:function(e){return"".concat(e.name)},getOptionValue:function(e){return"".concat(null===e||void 0===e?void 0:e.id)},onChange:function(t){e.setFieldValue("district",t)},loadOptions:O,additional:{offset:0,limit:10}}),(0,P.jsx)(u.Bc,{name:"district",component:b.Z})]}),(0,P.jsxs)("div",{className:"col-4 mb-3",children:[(0,P.jsx)("label",{htmlFor:"branch",className:"fw-bold",children:"Branch"}),(0,P.jsx)(f.n9,{blurInputOnSelect:!0,value:e.values.supplier,isClearable:"true",isSearchable:"true",name:"branch",inputId:"input",getOptionLabel:function(e){return"".concat(e.name)},getOptionValue:function(e){return"".concat(null===e||void 0===e?void 0:e.id)},onChange:function(t){e.setFieldValue("branch",t)},loadOptions:A,additional:{offset:0,limit:10}}),(0,P.jsx)(u.Bc,{name:"branch",component:b.Z})]}),(0,P.jsxs)("div",{className:"col-5 text-center m-3",children:[(0,P.jsx)(u.gN,{type:"checkbox",name:"adSystem",id:"adSystem",className:"filled-in chk-col-blue ",onChange:function(t){e.setFieldValue("startDate",(new Date).toLocaleDateString("fr-CA")),e.setFieldValue("endDate",(new Date).toLocaleDateString("fr-CA")),e.setFieldValue("adSystem",t.target.checked),e.setFieldValue("bsSystem",!1)}}),(0,P.jsx)("label",{htmlFor:"adSystem",className:"ml-2 fw-bold",children:"A.D System"})]}),(0,P.jsxs)("div",{className:"col-5 text-center m-3",children:[(0,P.jsx)(u.gN,{type:"checkbox",name:"bsSystem",id:"bsSystem",className:"filled-in chk-col-blue ",onChange:function(t){e.setFieldValue("bsSystem",t.target.checked),e.setFieldValue("adSystem",!1)}}),(0,P.jsxs)("label",{htmlFor:"bsSystem",className:"mx-2 fw-bold",children:[" ","B.S System"]})]}),(0,P.jsxs)("div",{className:"col-5",children:[(0,P.jsx)("label",{htmlFor:"from_date",className:"fw-bold",children:"Start Date"}),e.values.bsSystem?(0,P.jsx)(d.Z,{value:e.values.startDate,onChange:function(t){var n=t.bsDate,a=t.adDate;e.setFieldValue("startDate",n),g(a)},className:"form-control",label:"Start Date",name:"startDate",language:"en",dateFormat:"YYYY-MM-DD"}):(0,P.jsx)(p(),{value:e.values.startDate,format:"yyyy-MM-dd",label:"Start Date",name:"startDate",className:"form-control",onChange:function(t){e.setFieldValue("startDate",null===t||void 0===t?void 0:t.toLocaleDateString("fr-CA")),g(t)}}),(0,P.jsx)(u.Bc,{component:b.Z,name:"startDate"})]}),(0,P.jsxs)("div",{className:"col-5",children:[(0,P.jsx)("label",{htmlFor:"endDate",className:"fw-bold",children:"End Date"}),e.values.bsSystem?(0,P.jsx)(d.Z,{value:e.values.endDate,onChange:function(t){var n=t.bsDate,a=t.adDate;e.setFieldValue("endDate",n),y(a)},className:"form-control",label:"End Date",name:"endDate",language:"en",dateFormat:"YYYY-MM-DD"}):(0,P.jsx)(p(),{value:e.values.endDate,format:"yyyy-MM-dd",label:"End Date",name:"endDate",className:"form-control",onChange:function(t){e.setFieldValue("endDate",null===t||void 0===t?void 0:t.toLocaleDateString("fr-CA")),y(t)}}),(0,P.jsx)(u.Bc,{component:b.Z,name:"endDate"})]}),(0,P.jsxs)("div",{className:"col-3 m-3 text-center",children:[(0,P.jsx)(u.gN,{type:"checkbox",name:"quickReport",id:"quickReport",className:"filled-in chk-col-blue ",onChange:function(t){e.setFieldValue("quickReport",t.target.checked),e.setFieldValue("pdfReport",!1),e.setFieldValue("excelReport",!1)}}),(0,P.jsxs)("label",{htmlFor:"quickReport",className:"mx-2 fw-bold",children:[" ","Quick Report"]})]}),(0,P.jsxs)("div",{className:"col-3 m-3 text-center",children:[(0,P.jsx)(u.gN,{type:"checkbox",name:"pdfReport",id:"pdfReport",className:"filled-in chk-col-blue ",onChange:function(t){e.setFieldValue("pdfReport",t.target.checked),e.setFieldValue("quickReport",!1),e.setFieldValue("excelReport",!1)}}),(0,P.jsxs)("label",{htmlFor:"pdfReport",className:"mx-2 fw-bold",children:[" ","PDF"]})]}),(0,P.jsxs)("div",{className:"col-3 m-3 text-center",children:[(0,P.jsx)(u.gN,{type:"checkbox",name:"excelReport",id:"excelReport",className:"filled-in chk-col-blue ",onChange:function(t){e.setFieldValue("excelReport",t.target.checked),e.setFieldValue("pdfReport",!1),e.setFieldValue("quickReport",!1)}}),(0,P.jsxs)("label",{htmlFor:"excelReport",className:"mx-2 fw-bold",children:[" ","Excel"]})]})]}),(0,P.jsx)("div",{className:"form-group d-flex justify-content-center mt-3 ",children:(0,P.jsx)(v.Z,{type:"btn",className:"btn btn-primary",title:"Generate",content:"Generate"})})]})}})})})})})})},C=r.memo(Z),E=(0,r.lazy)((function(){return n.e(887).then(n.bind(n,15887))})),V=(0,r.lazy)((function(){return Promise.all([n.e(125),n.e(52),n.e(693),n.e(986)]).then(n.bind(n,2986))})),M=(0,r.lazy)((function(){return Promise.all([n.e(133),n.e(873)]).then(n.bind(n,71103))})),_=function(){var e=(0,o.v9)((function(e){return e.creditPrintReport.prints})),t=(0,r.useState)(new Date),n=(0,a.Z)(t,2),s=n[0],i=n[1],c=(0,r.useState)(new Date),l=(0,a.Z)(c,2),d=l[0],u=l[1],m=(0,r.useState)(null),p=(0,a.Z)(m,2),f=p[0],h=p[1],v=(0,r.useState)(!1),b=(0,a.Z)(v,2),D=b[0],x=b[1],g=(0,r.useState)(!1),S=(0,a.Z)(g,2),y=S[0],j=S[1],R=(0,r.useState)(!1),w=(0,a.Z)(R,2),N=w[0],F=w[1];return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(C,{name:"creditPrintReport",setShowPrintExcelReportModal:F,setShowPrintPDFReportModal:j,setShowPrintReportModal:x,reportStartDate:s,setReportStartDate:i,reportEndDate:d,setReportEndDate:u,setFormData:h}),(0,P.jsx)(r.Suspense,{fallback:(0,P.jsx)("div",{children:"Loading..."}),children:D&&(null===e||void 0===e?void 0:e.length)>0&&(0,P.jsx)(E,{showPrintReportModal:D,setShowPrintReportModal:x,formData:f,prints:e})}),(0,P.jsx)(r.Suspense,{fallback:(0,P.jsx)("div",{children:"Loading..."}),children:y&&(null===e||void 0===e?void 0:e.length)>0&&(0,P.jsx)(V,{showPrintPDFReportModal:y,setShowPrintPDFReportModal:j,formData:f,prints:e})}),(0,P.jsx)(r.Suspense,{fallback:(0,P.jsx)("div",{children:"Loading..."}),children:N&&(null===e||void 0===e?void 0:e.length)>0&&(0,P.jsx)(M,{showPrintExcelReportModal:N,setShowPrintExcelReportModal:F,formData:f,prints:e})})]})},O=r.memo(_)},2664:function(e,t,n){n.d(t,{P:function(){return a}});var a=function(e){if(e)return Intl.DateTimeFormat("fr-CA",{day:"2-digit",month:"2-digit",year:"numeric"}).format(e)}},32328:function(e,t,n){e.exports=n.p+"static/media/spinner.9012f56ae4662e1be3c6.gif"}}]);
//# sourceMappingURL=734.ef691205.chunk.js.map